<section class="container">
  <div class="header">
    <%= link_to :back, class: "back" do %>
      <i class="fas fa-arrow-left"></i>
    <% end %>
    <h1>Categories</h1>
    <%= form_for(current_user, url: destroy_user_session_path, method: :delete, html: { class: "nav-link" }) do |f| %>
      <%= f.button type: :submit, class: "btn-logout" do %>
        <i class="fa-solid fa-right-from-bracket"></i>
      <% end %>
    <% end %>
  </div>

  <% if @categories.any? %>
    <ul class="categories">
      <% @categories.each do |category| %>
        <li class="category">
          <div class="info">
            <% if category.icon.present? %>
              <p class="icon"><%= raw category.icon %></p>
            <% end %>
            <h3 class="category-name"><%= "#{category.name}:" %></h3>
            <p class="sum">$<%= category.expenses.sum(&:amount) %></p>
          </div>
          <div class="btn">
            <div class="btn-expense">
              <button><%= link_to 'View Expenses', category_expenses_path(category) %></button>
              <button><%= link_to 'Add a New Expense', new_category_expense_path(category) %></button>
            </div>
            <%= button_to 'Delete', category_path(category), method: :delete, class: 'btn-danger', data: { confirm: 'Are you sure you want to delete this category?' } %>
          </div>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p class="msg">No categories found</p>
  <% end %>
  <button class="btn addNew"><%= link_to 'Scan', new_category_path %></button>
</section>
